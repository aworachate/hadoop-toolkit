#summary Hadoop performance tool cloudera patch instruction for Hadoop version- hadoop 0.20.1+152 and hadoop-0.20.2+228


= Hadoop perforamance tool cloudera patch instruction: =


1.	If you haven't installed then install hadoop-0.20.1+152 / hadoop-0.20.2+228 using CDH2 / CDH3.

2. Stop all hadoop processes(namenode, jobtracker, secondarynamenode, datanode, tasktracker).

3.	Download hadoop-0.20.1+152_patch-core.jar / hadoop-0.20.2+228-core.jar, hadoop-performance-analysis.properties files from the download section(http://code.google.com/p/hadoop-toolkit/downloads/list ).

4.	Replace /usr/lib/hadoop-0.20/hadoop-0.20.1+152-core.jar / hadoop-0.20.2+228-core.jar with  downloaded hadoop-0.20.1+152_patch-core.jar / hadoop-0.20.2+228-core.jar

5.	Copy hadoop-performance-analysis.properties file to /etc/hadoop-0.20/conf (/etc/hadoop-0.20/conf which is soft link to /etc/alternatives/hadoop-0.20-conf/)directory.

6.	Add following property to /etc/hadoop-0.20/conf/mapred-site.xml  file 
       <property>
        <name>mapred.performance.diagnose</name>
        <value>true</value>
       </property>

Can be turned on and off for performance monitoring (true for on and false for off)

7.	Add following servlets configuration to /usr/lib/hadoop-0.20/webapps/job/WEB-INF/web.xml  file

     <servlet>
        <servlet-name>org.apache.hadoop.mapred.performanceanalysis_jsp</servlet-name>
        <servlet-class>org.apache.hadoop.mapred.performanceanalysis_jsp</servlet-class>
     </servlet>

     <servlet>
        <servlet-name>org.apache.hadoop.mapred.tasktrackerinfo_jsp</servlet-name>
        <servlet-class>org.apache.hadoop.mapred.tasktrackerinfo_jsp</servlet-class>
     </servlet>

     <servlet-mapping>
        <servlet-name>org.apache.hadoop.mapred.performanceanalysis_jsp</servlet-name>
        <url-pattern>/performanceanalysis.jsp</url-pattern>
     </servlet-mapping>

     <servlet-mapping>
        <servlet-name>org.apache.hadoop.mapred.tasktrackerinfo_jsp</servlet-name>
        <url-pattern>/tasktrackerinfo.jsp</url-pattern>
     </servlet-mapping>

8.	Above step should be performed on each node of hadoop cluster.

9.	 Start all hadoop processes(namenode, jobtracker, secondarynamenode, datanode, tasktracker) and run map-reduce job.

10.	To view performance tool results follow link(http://code.google.com/p/hadoop-toolkit/wiki/HadoopPerformanceMonitoring )